<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>Результат</title>
  <style>
    body { font-family: 'Segoe UI', Tahoma, sans-serif; background: #f4f4f4; padding: 20px; }
    .section { background: #fff; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-bottom: 30px; }
    table { border-collapse: collapse; }
    table.grid td { width: {{cell_size}}px; height: {{cell_size}}px; border: 1px solid #ddd; text-align: center; vertical-align: middle; font-family: monospace; font-size: {{cell_size//2}}px; }
    table.legend th, table.legend td { border: 1px solid #ddd; padding: 6px 10px; font-size: 14px; text-align: left; }
    h1, h2, h3 { color: #333; margin-bottom: 10px; }
  </style>
</head>
<body>
  <h1>Результат: {{width}}×{{height}}</h1>

  <div class="section">
    <h2>Original Grid</h2>
    <table class="grid">
      {% for row in grid_rows %}
      <tr>
        {% for cell in row %}
        <td style="background:{{cell.hex}};">{{cell.num}}</td>
        {% endfor %}
      </tr>
      {% endfor %}
    </table>
    <h3>Original Palette</h3>
    <table class="legend">
      <tr><th>№</th><th>Color</th><th>HEX</th><th>Count</th></tr>
      {% for item in legend_real %}
      <tr><td>{{item.num}}</td><td style="background:{{item.hex}}; width:20px;"></td><td>{{item.hex}}</td><td>{{item.count}}</td></tr>
      {% endfor %}
    </table>
  </div>

  <div class="section">
    <h2>Fill Grid</h2>
    <img src="data:image/png;base64,{{png_b64}}" style="image-rendering: pixelated;">
    <h3>Fill Palette</h3>
    <table class="legend">
      <tr><th>№</th><th>Color</th></tr>
      {% for item in legend_fill %}
      <tr><td>{{item.num}}</td><td style="background:{{item.hex}}; width:20px;"></td></tr>
      {% endfor %}
    </table>
  </div>
</body>
</html>
